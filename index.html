<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' https://script.google.com https://accounts.google.com">
    <meta http-equiv="Permissions-Policy" content="identity-credentials-get=()">
    <title>Painel Interno com ChatBot - Tema Cl√°ssico</title>
    <link rel="icon" type="image/png" href="https://github.com/velobot05/Chatbot-Atendimento/blob/main/imagens/logo.png-removebg-preview%20(1).png?raw=true">
    <link rel="stylesheet" href="style.css">
    <style>
        /* CSS inline tempor√°rio */
        :root {
            --cor-fundo: #f0f4f8;
            --cor-container: #ffffff;
            --cor-caixa-chat: #eaf2ff;
            --cor-texto-principal: #333;
            --cor-borda: #d1e3f0;
            --cor-azul-claro: #a7d9ee;
            --cor-azul-medio: #007BFF;
            --cor-azul-escuro: #0056b3;
            --cor-balao-bot: #D6E4FF;
            --cor-sombra: rgba(0, 0, 0, 0.1);
            --cor-texto-link: #1a73e8;
            --cor-foco: #4d90fe;
            --cor-sucesso: #4CAF50;
            --cor-erro: #f44336;
            --cor-alerta: #FF9800;
            --cor-info: #2196F3;
            --espaco-xs: 4px;
            --espaco-sm: 8px;
            --espaco-md: 16px;
            --espaco-lg: 24px;
            --espaco-xl: 32px;
            --borda-raio: 12px;
            --borda-raio-sm: 6px;
            --avatar-size: 36px;
            --transicao-rapida: 0.2s ease;
            --transicao-normal: 0.3s ease;
            --transicao-lenta: 0.5s ease;
        }
        body.dark-theme {
            --cor-fundo: #121212;
            --cor-container: #1e1e1e;
            --cor-caixa-chat: #2a2a2a;
            --cor-texto-principal: #e0e0e0;
            --cor-borda: #334a5f;
            --cor-azul-claro: #334a5f;
            --cor-azul-medio: #3a9bff;
            --cor-azul-escuro: #87c3ff;
            --cor-balao-bot: #2c3e50;
            --cor-sombra: rgba(255, 255, 255, 0.05);
            --cor-texto-link: #8ab4f8;
            --cor-foco: #5e97f6;
            --cor-sucesso: #2e7d32;
            --cor-erro: #c62828;
            --cor-alerta: #FFA000;
            --cor-info: #1976D2;
        }
        body {
            font-family: 'Segoe UI', 'Arial', sans-serif;
            background: var(--cor-fundo);
            color: var(--cor-texto-principal);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            padding: var(--espaco-md);
            box-sizing: border-box;
            transition: background-color var(--transicao-normal), color var(--transicao-normal);
            background-image: url('https://github.com/VeloProcess/PDP-Portal-de-Processos-/blob/main/unnamed.png?raw=true');
            background-size: cover;
            background-position: center center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
        #login-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100%;
            text-align: center;
            background-color: rgba(0, 50, 100, 0.85);
            backdrop-filter: blur(5px);
            z-index: 1000;
        }
        .app-wrapper.hidden {
            display: none;
        }
        /* ... resto do CSS do style.css ... */
    </style>
    <script>
        function handleCredentialResponse(response) {
            const userObject = JSON.parse(atob(response.credential.split('.')[1]));
            const dadosAtendente = {
                nome: userObject.name,
                email: userObject.email,
                foto: userObject.picture,
                timestamp: Date.now()
            };
            const DOMINIO_PERMITIDO = "@velotax.com.br";
            if (!dadosAtendente.email.endsWith(DOMINIO_PERMITIDO)) {
                alert("Acesso negado. Por favor, use uma conta Google com o dom√≠nio " + DOMINIO_PERMITIDO);
                return;
            }
            localStorage.setItem('dadosAtendenteChatbot', JSON.stringify(dadosAtendente));
            document.getElementById('login-screen').style.display = 'none';
            document.querySelector('.app-wrapper').classList.remove('hidden');
            iniciarBot(dadosAtendente);
        }
    </script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <div id="login-screen">
        <div>
            <img src="https://github.com/VeloProcess/PDP-Portal-de-Processos-/blob/main/unnamed%20(2).png?raw=true" alt="Logo da Empresa" style="width: 100px; margin-bottom: 20px;">
            <h2>Bem-vindo(a) ao Painel de Atendimento</h2>
            <p>Por favor, fa√ßa login com sua conta Google para continuar.</p>
            <div id="g_id_onload"
                 data-client_id="827325386401-ahi2f9ume9i7lc28lau7j4qlviv5d22k.apps.googleusercontent.com"
                 data-callback="handleCredentialResponse"
                 data-auto_select="true">
            </div>
            <div class="g_id_signin"
                 data-type="standard"
                 data-theme="outline"
                 data-size="large"
                 data-text="sign_in_with"
                 data-shape="rectangular"
                 data-logo_alignment="left">
            </div>
        </div>
    </div>

    <div class="app-wrapper hidden">
        <div id="sidebar" class="panel">
            <div class="panel-header">
                <h2>Perguntas Frequentes</h2>
            </div>
            <div class="sidebar-content">
                <div class="search-container">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="question-search" placeholder="Buscar perguntas...">
                </div>
                
                <div class="question-category">Mais Comuns</div>
                <ul id="quick-questions-list">
                    <li data-question="E-mail de procura√ß√£o, o que dizer?">E-mail de procura√ß√£o, o que dizer?</li>
                    <li data-question="Quero fazer a exclus√£o da minha conta">Quero fazer a exclus√£o da minha conta</li>
                    <li data-question="Problema no login do app">Problema no login do app</li>
                    <li data-question="Informa√ß√£o sobre os valores da restitui√ß√£o">Informa√ß√£o sobre os valores da restitui√ß√£o</li>
                </ul>

                <div id="expandable-faq-container">
                    <div id="expandable-faq-header" class="expandable-header">
                        <span>Outras Perguntas</span>
                        <span class="arrow">‚ñ∂</span>
                    </div>
                    <div id="more-questions" class="hidden-questions">
                        <div class="question-category">Financeiro</div>
                        <ul id="more-questions-list">
                            <li data-question="Reten√ß√£o da chave pix">Reten√ß√£o da chave pix</li>
                            <li data-question="Juros">Juros</li>
                            <li data-question="Desconto proporcional">Desconto proporcional</li>
                            <li data-question="Qual o prazo para a restitui√ß√£o?">Qual o prazo para a restitui√ß√£o?</li>
                            <li data-question="Como fazer estorno?">Como fazer estorno?</li>
                        </ul>
                        
                        <div class="question-category">T√©cnico</div>
                        <ul id="more-questions-list">
                            <li data-question="Portabilidade">Portabilidade</li>
                            <li data-question="O que fazer se ca√≠ na malha fina?">O que fazer se ca√≠ na malha fina?</li>
                            <li data-question="Como declarar investimentos?">Como declarar investimentos?</li>
                        </ul>
                    </div>
                </div>

                <div style="margin-top: auto; padding-top: var(--espaco-md); border-top: 1px solid var(--cor-borda);">
                    <h2><p style="font-size: 13px; color: var(--cor-azul-medio);">üìã Clique na prancheta ao lado da resposta para copiar</p></h2>
                    <p style="font-size: 12px; margin-top: var(--espaco-sm);"><strong>Observa√ß√£o: As informa√ß√µes aqui s√£o de uso interno.</strong> </p>
                </div>
            </div>
        </div>

        <div class="chat-container panel">
            <div class="chat-header">
                <img src="https://github.com/VeloProcess/PDP-Portal-de-Processos-/blob/main/unnamed%20(2).png?raw=true" alt="Logo" class="chat-logo">
                <h2 class="chat-title">Assistente Virtual <span class="status-indicator"></span></h2>
                <button id="theme-switcher" title="Alterar tema">‚òÄÔ∏è</button>
            </div>
            <div class="chat-box" id="chat-box"></div>
            <div class="input-area">
                <input type="text" id="user-input" placeholder="Digite sua mensagem..." autocomplete="off">
                <button id="send-button" class="action-button" title="Enviar mensagem">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M3.478 2.405a.75.75 0 0 0-.926.94l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.405Z"></path></svg>
                </button>
                <button class="gemini-button" onclick="window.open('https://gemini.google.com/app')" title="Obter ajuda do Gemini AI">
                    ‚ú¶
                </button>
            </div>
        </div>

        <div id="news-panel" class="panel">
            <div class="panel-header">
                <h2>Not√≠cias e Alertas</h2>
            </div>
            <div id="news-list" style="padding: var(--espaco-md);">
                <div class="news-item critical-alert">
                    <h2>Desligamos a Antecipa√ß√£o novamente, pessoal</h2>
                    <small>Publicado em: 07/07/2025</small>
                    <p>Pessoal, para todos os clientes que entrarem em contato via chamada ou ticket, que questionar/demonstrar interesse na antecipa√ß√£o e/ou cr√©dito trabalhador, por favor, registrem na planilha abaixo, pois realizaremos o envio de notifica√ß√£o para os mesmos. 
üö®√â importante¬π mencionar que estamos realizando os testes finais e em breve ser√£o disponibilizados no aplicativo.
üö®√â importante¬≤ ***N√ÉO*** mencionar nenhum prazo aos clientes. Conforme formos avan√ßando, informaremos √† voc√™s. Link e planilha no grupo B2C Recados e novidades!!</p>
                </div>
                <div class="news-item warning-alert">
                    <h2>Ainda sem novidades!</h2>
                    <small></small>
                    <p></p>
                </div>
                <div class="news-item info-alert">
                    <h2>Ainda sem novidades!</h2>
                    <small></small>
                    <p></p>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
